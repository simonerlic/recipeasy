////  ImagePicker.swift//  recipeasy////  Created by Simon Erlic on 2024-11-17.//import SwiftUIimport PhotosUIstruct ImagePicker: View {    @Binding var imageData: Data?    let title: String        @State private var selectedItem: PhotosPickerItem?        var body: some View {        VStack(spacing: 12) {            if let imageData = imageData,               let uiImage = UIImage(data: imageData) {                Image(uiImage: uiImage)                    .resizable()                    .scaledToFit()                    .clipShape(RoundedRectangle(cornerRadius: 12))                                HStack(spacing: 16) {                    PhotosPicker(selection: $selectedItem,                               matching: .images,                               photoLibrary: .shared()) {                        Label("Change Image", systemImage: "photo")                            .font(.subheadline)                            .foregroundStyle(.blue)                            .padding(.vertical, 8)                            .padding(.horizontal, 16)                            .background(Color.blue.opacity(0.1), in: Capsule())                    }                                        Button(role: .destructive) {                        withAnimation {                            self.imageData = nil                        }                    } label: {                        Label("Remove", systemImage: "trash")                            .font(.subheadline)                            .foregroundStyle(.red)                            .padding(.vertical, 8)                            .padding(.horizontal, 16)                            .background(Color.red.opacity(0.1), in: Capsule())                    }                }            } else {                PhotosPicker(selection: $selectedItem,                           matching: .images,                           photoLibrary: .shared()) {                    VStack(spacing: 8) {                        Image(systemName: "photo.badge.plus")                            .font(.system(size: 24))                            .foregroundStyle(.blue)                                                Text("Add \(title)")                            .font(.subheadline)                    }                    .frame(maxWidth: .infinity)                    .padding(.vertical, 24)                    .background(Color.blue.opacity(0.1))                    .clipShape(RoundedRectangle(cornerRadius: 12))                    .overlay(                        RoundedRectangle(cornerRadius: 12)                            .strokeBorder(Color.blue.opacity(0.3), style: StrokeStyle(lineWidth: 1, dash: [4]))                    )                }            }        }        .onChange(of: selectedItem) { old, new in            Task {                if let data = try? await new?.loadTransferable(type: Data.self) {                    // Compress image if needed                    if let image = UIImage(data: data),                       let compressedData = image.jpegData(compressionQuality: 0.7) {                        imageData = compressedData                    } else {                        imageData = data                    }                }                selectedItem = nil            }        }    }}